<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ROCK-PAPER-SCISSORS</title>
    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/layout.css" />
  </head>
  <body>
    <div class="wrap">
      <h1>ROCK-PAPER-SCISSORS</h1>
      <div id="com">
        <ul>
          <li>
            <img src="../images/rock.svg" alt="" />
            <!-- svg : 이미지 확대 축소해도 안깨짐 -->
          </li>
          <li>
            <img src="../images/paper.svg" alt="" />
          </li>
          <li>
            <img src="../images/scissors.svg" alt="" />
          </li>
        </ul>
      </div>
      <div id="player">
        <ul>
          <li>
            <img src="../images/rock.svg" alt="" />
          </li>
          <li>
            <img src="../images/paper.svg" alt="" />
          </li>
          <li>
            <img src="../images/scissors.svg" alt="" />
          </li>
        </ul>
      </div>
    </div>
  </body>
  <script>
    const tempArray = ["apple", "banana", "orange"];
    // iterable : 순회가능한
    tempArray.forEach((element, index, array) => {
      console.log(element, "===", index, "===", array);
    });
    const comList = document.querySelectorAll(".wrap #com ul li");
    const players = document.querySelectorAll(".wrap #player ul li");
    const playersList = document.querySelectorAll(".wrap #player ul");
    // 배열처럼 생긴 유사배열 nodeList
    let sel = 0;

    /*
    for (let i = 0; i < comList.length; i++) {
      comList[i].style.display = "none";
    } */
    console.log(comList);

    let count = 0;
    // setTimeout(() => {
    //   console.log("나는 한번만 합니다.");
    // }, 0);
    const comChoice = function () {
      comList.forEach((element, index) => {
        element.style.display = "none";
        // console.log(element);
      });
      // comList[count].style.display = "block";
      comList[sel].style.display = "block";
      sel = Math.floor(Math.random() * 3);
      // if (count >= 3) {
      //   count = 0;
      // }
      // console.log("나는 setInterval이 찍는 콘솔-멈출때까지 계속 진행");
    };
    let clearIdx = setInterval(comChoice, 30);
    // 비동기 - a싱크로나이즈 .. setInterval, setTimeout, node에 걸린 이벤트, ajax
    // 동기 - 싱크로나이즈
    // 동기 실행 후 비동기 실행
    // console.log("나는 setInterval보다 먼저 실행될까요? 나중에 실행될까요?");
    players.forEach((element, index) => {
      element.addEventListener("click", () => {
        clearInterval(clearIdx);
        setTimeout(() => {
          clearIdx = setInterval(comChoice, 30);
          element.classList.remove("on");
          playersList.classList.remove("prevent");
        }, 1000);
        element.classList.add("on");
        playersList.classList.add("prevent");
      });
    });
  </script>
</html>
